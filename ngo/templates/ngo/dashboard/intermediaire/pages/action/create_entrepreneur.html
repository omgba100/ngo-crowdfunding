{% extends "base_intermediaire.html" %}
{% load static i18n crispy_forms_tags %}

{% block title %}{% trans "Créer un nouvel entrepreneur" %}{% endblock %}

{% block extra_head %}
<!-- AOS (animations au scroll) -->
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

<!-- Material Design Icons -->
<link href="https://cdn.materialdesignicons.com/7.2.96/css/materialdesignicons.min.css" rel="stylesheet">

<!-- SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
{% endblock extra_head %}

{% block base_intermediaire %}
<div class="container py-5">

  <div class="row justify-content-center">
    <div class="col-lg-8 col-md-10" data-aos="fade-up">

      <!-- Card Formulaire -->
      <div class="card shadow-lg border-0 rounded-4">
        <div class="card-body p-5">

          <div class="text-center mb-4">
            <div class="d-inline-flex align-items-center justify-content-center bg-primary bg-opacity-10 text-primary rounded-circle p-3 mb-3">
              <i class="mdi mdi-account-plus-outline mdi-36px"></i>
            </div>
            <h3 class="fw-bold text-dark mb-1">{% trans "Créer un nouvel entrepreneur" %}</h3>
            <p class="text-muted">{% trans "Remplissez le formulaire ci-dessous pour ajouter un entrepreneur à votre réseau." %}</p>
          </div>

          <form id="entrepreneurForm" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {% crispy form %}

            <button type="submit" class="btn btn-primary w-100 py-2 fw-bold rounded-3 shadow-sm mt-3">
              <i class="mdi mdi-send-outline me-1"></i> {% trans "Enregistrer l'entrepreneur" %}
            </button>
          </form>

        </div>
      </div>
    </div>
  </div>

</div>

<!-- AOS Animation -->
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>AOS.init();</script>

<!-- SweetAlert2 Confirmation -->
<script>
document.addEventListener('DOMContentLoaded', function () {
  const form = document.getElementById('entrepreneurForm');
  form.addEventListener('submit', function(e) {
    e.preventDefault(); // Empêche l'envoi direct
    Swal.fire({
      title: '{% trans "Confirmer l’envoi ?" %}',
      text: '{% trans "Voulez-vous vraiment créer cet entrepreneur ?" %}',
      icon: 'question',
      showCancelButton: true,
      confirmButtonColor: '#007bff',
      cancelButtonColor: '#6c757d',
      confirmButtonText: '{% trans "Oui, créer !" %}',
      cancelButtonText: '{% trans "Annuler" %}',
      backdrop: `rgba(0,0,0,0.4)`
    }).then((result) => {
      if (result.isConfirmed) {
        form.submit();
      }
    });
  });
});
</script>
{% endblock base_intermediaire %}
