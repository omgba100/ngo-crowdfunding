{% extends "base_entrepreneur.html" %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Supprimer le Projet" %}{% endblock %}

{% block base_entrepreneur %}

<div class="container py-5">
  <div class="card shadow-lg border-0 rounded-4">
    <div class="card-body text-center p-5">
      <h3 class="fw-bold text-danger mb-3">
        ⚠️ {% trans "Confirmer la suppression du projet" %}
      </h3>

      <p class="lead mb-4">
        {% blocktrans with project_title=project.title %}
        Êtes-vous sûr de vouloir supprimer le projet <strong>"{{ project_title }}"</strong> ?
        Cette action est <span class="text-danger fw-bold">irréversible</span>.
        {% endblocktrans %}
      </p>

      <form id="deleteForm" method="post">
        {% csrf_token %}
        <div class="d-flex justify-content-center gap-3 mt-4">
          <a href="{% url 'dashboard_entrepreneur' %}" class="btn btn-secondary px-4">
            <i class="bi bi-arrow-left-circle me-2"></i> {% trans "Annuler" %}
          </a>

          <button type="submit" class="btn btn-danger px-4" id="confirmDeleteBtn">
            <i class="bi bi-trash3 me-2"></i> {% trans "Supprimer définitivement" %}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  const deleteForm = document.getElementById("deleteForm");
  const confirmBtn = document.getElementById("confirmDeleteBtn");

  confirmBtn.addEventListener("click", function (e) {
    e.preventDefault();

    Swal.fire({
      title: "⚠️ Êtes-vous sûr ?",
      text: "Cette action supprimera définitivement le projet.",
      icon: "warning",
      showCancelButton: true,
      confirmButtonColor: "#d33",
      cancelButtonColor: "#3085d6",
      confirmButtonText: "Oui, supprimer",
      cancelButtonText: "Annuler",
      reverseButtons: true,
      focusCancel: true,
    }).then((result) => {
      if (result.isConfirmed) {
        deleteForm.submit();
      }
    });
  });
});
</script>

{% endblock base_entrepreneur %}
