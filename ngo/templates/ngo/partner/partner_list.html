{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Nos Partenaires" %}{% endblock %}

{% block content %}

<!-- ======================= -->
<!-- HERO / HEADER -->
<!-- ======================= -->
<header class="bg-dark text-white position-relative" 
        style="height: 320px; background: url('{% static "assets/img/about/hero-bg.jpg" %}') no-repeat center center/cover;">
  <div class="overlay position-absolute top-0 start-0 w-100 h-100" style="background: rgba(0,0,0,0.6);"></div>
  <div class="container position-relative h-100 d-flex flex-column justify-content-center align-items-center text-center">
      <h1 class="display-4 fw-bold" data-aos="fade-down">{% trans "Nos Partenaires" %}</h1>
      <p class="lead mt-3" data-aos="fade-up" data-aos-delay="200">
        {% trans "Découvrez les organisations qui collaborent avec IGIA pour un impact global." %}
      </p>
  </div>
</header>

<!-- ======================= -->
<!-- PARTNERS SECTION -->
<!-- ======================= -->
<section class="py-5" style="background-color: var(--bg-primary);">
  <div class="container">

    <!-- SECTION TITLE -->
    <div class="text-center mb-5">
      <h2 class="fw-bold" style="color: var(--text-title);" data-aos="fade-up">{% trans "Nos partenaires actifs" %}</h2>
      <p class="text-muted" data-aos="fade-up" data-aos-delay="150">
        {% trans "Filtrez les partenaires selon leur type et découvrez la diversité de notre réseau." %}
      </p>
    </div>

    <!-- FILTER BUTTONS -->
    <div class="text-center mb-5" data-aos="fade-up" data-aos-delay="250">
      <div class="btn-group flex-wrap" role="group" aria-label="Filter buttons">
        <button class="btn btn-outline-primary active filter-btn" data-filter="all">{% trans "Tous" %}</button>
        <button class="btn btn-outline-primary filter-btn" data-filter="ngo">{% trans "ONG / Association" %}</button>
        <button class="btn btn-outline-primary filter-btn" data-filter="company">{% trans "Entreprise privée" %}</button>
        <button class="btn btn-outline-primary filter-btn" data-filter="gov">{% trans "Institution publique" %}</button>
        <button class="btn btn-outline-primary filter-btn" data-filter="individual">{% trans "Partenaire individuel" %}</button>
        <button class="btn btn-outline-primary filter-btn" data-filter="other">{% trans "Autre" %}</button>
      </div>
    </div>

    <!-- GRID PARTNERS -->
    <div class="row g-4" id="partnerGrid">
      {% for partner in partners %}
      <div class="col-md-6 col-lg-4 partner-item" data-type="{{ partner.partner_type }}" 
           data-aos="zoom-in" data-aos-delay="{{ forloop.counter0|add:'100' }}">
        <div class="card border-0 shadow-lg h-100 position-relative overflow-hidden partner-card">
          {% if partner.logo %}
            <img src="{{ partner.logo.url }}" class="card-img-top" alt="{{ partner.name }}" style="height: 200px; object-fit: contain; background-color: #fff;">
          {% else %}
            <div class="d-flex justify-content-center align-items-center bg-light" style="height: 200px;">
              <i class="bi bi-building text-secondary fs-1"></i>
            </div>
          {% endif %}

          <div class="card-body text-center p-4">
            <h5 class="fw-bold mb-2" style="color: var(--text-title);">{{ partner.name }}</h5>
            <span class="badge rounded-pill text-dark mb-3" style="background-color: var(--accent); font-size: 0.9rem;">
              {{ partner.get_partner_type_display }}
            </span>
            <p class="text-muted small">{{ partner.description|truncatewords:20 }}</p>

            {% if partner.website %}
            <a href="{{ partner.website }}" target="_blank" class="btn btn-outline-primary btn-sm mt-3" 
               style="border-color: var(--bg-tertiary); color: var(--bg-tertiary);">
               <i class="bi bi-globe me-1"></i> {% trans "Visiter le site" %}
            </a>
            {% endif %}
          </div>

          <div class="card-footer bg-transparent border-0 text-center pb-4">
            {% if partner.email %}
              <a href="mailto:{{ partner.email }}" class="text-secondary me-3"><i class="bi bi-envelope fs-5"></i></a>
            {% endif %}
            {% if partner.phone %}
              <a href="tel:{{ partner.phone }}" class="text-secondary"><i class="bi bi-telephone fs-5"></i></a>
            {% endif %}
          </div>
        </div>
      </div>
      {% empty %}
      <div class="col-12 text-center">
        <p class="text-muted fst-italic">{% trans "Aucun partenaire actif pour le moment." %}</p>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- ======================= -->
<!-- STYLES LOCAUX -->
<!-- ======================= -->
<style>
.partner-card {
  transition: all 0.4s ease-in-out;
  border-radius: 1rem;
}
.partner-card:hover {
  transform: translateY(-10px) scale(1.02);
  box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}
.partner-card img {
  transition: transform 0.4s ease;
}
.partner-card:hover img {
  transform: scale(1.05);
}

.btn-outline-primary {
  border-color: var(--bg-tertiary);
  color: var(--bg-tertiary);
}
.btn-outline-primary:hover, 
.btn-outline-primary.active {
  background-color: var(--bg-tertiary);
  color: var(--text-white);
}

.partner-item {
  transition: all 0.3s ease-in-out;
}
</style>

<!-- ======================= -->
<!-- SCRIPTS -->
<!-- ======================= -->
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
<script>
AOS.init({ duration: 800, once: true });

// Filtrage dynamique des partenaires
document.querySelectorAll('.filter-btn').forEach(button => {
  button.addEventListener('click', () => {
    const filter = button.getAttribute('data-filter');
    
    document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
    button.classList.add('active');

    document.querySelectorAll('.partner-item').forEach(item => {
      if (filter === 'all' || item.getAttribute('data-type') === filter) {
        item.style.display = 'block';
        item.classList.add('aos-animate');
      } else {
        item.style.display = 'none';
      }
    });
  });
});
</script>

{% endblock %}
