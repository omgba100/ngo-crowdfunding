{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Témoignages" %}{% endblock %}

{% block content %}

<!-- ======================= -->
<!-- HERO / HEADER -->
<!-- ======================= -->
<header class="bg-dark text-white position-relative" style="height: 300px; background: url('{% static "assets/img/about/hero-bg.jpg" %}') no-repeat center center/cover;">
    <div class="overlay position-absolute top-0 start-0 w-100 h-100" style="background-color: rgba(0,0,0,0.5);"></div>
    <div class="container position-relative h-100 d-flex flex-column justify-content-center align-items-center text-center">
        <h1 class="display-4 fw-bold" data-aos="fade-down">{% trans "Témoignages" %}</h1>
        <p class="lead mt-3" data-aos="fade-up" data-aos-delay="200">{% trans "Découvrez des entrepreneurs qui nous disent leur gratitude." %}</p>
    </div>
</header>

<!-- ======================= -->
<!-- TESTIMONIALS SECTION -->
<!-- ======================= -->
<section class="py-5" style="background-color: var(--bg-primary);">
    <div class="container">
        <!-- SECTION TITLE -->
        <div class="text-center mb-5">
            <h2 class="fw-bold" style="color: var(--text-title);" data-aos="fade-up">{% trans "Ce que disent nos entrepreneurs" %}</h2>
            <p class="text-muted" data-aos="fade-up" data-aos-delay="150">{% trans "Chaque témoignage raconte une expérience unique avec IGIA." %}</p>
        </div>

        <!-- GRID TESTIMONIALS -->
        <div class="row g-4">
            {% for testimonial in testimonials %}
            {% if testimonial.approved %}
            <div class="col-md-6 col-lg-4" data-aos="zoom-in" data-aos-delay="{{ forloop.counter0|add:'100' }}">
                <div class="card border-0 shadow-lg h-100 testimonial-card position-relative overflow-hidden">
                    <!-- Photo -->
                    {% if testimonial.photo %}
                        <img src="{{ testimonial.photo.url }}" class="card-img-top" alt="{{ testimonial.name }}" style="height: 220px; object-fit: cover;">
                    {% else %}
                        <div class="d-flex justify-content-center align-items-center bg-light" style="height: 220px;">
                            <i class="bi bi-person-circle text-secondary fs-1"></i>
                        </div>
                    {% endif %}

                    <!-- Card Body -->
                    <div class="card-body text-center p-4">
                        <h5 class="fw-bold mb-2" style="color: var(--text-title);">{{ testimonial.name }}</h5>
                        {% if testimonial.project %}
                        <span class="badge rounded-pill text-dark mb-3" style="background-color: var(--accent); font-size: 0.85rem;">
                            {{ testimonial.project.name }}
                        </span>
                        {% endif %}
                        <p class="text-muted small">{{ testimonial.message|truncatewords:25 }}</p>
                    </div>
                </div>
            </div>
            {% endif %}
            {% empty %}
            <div class="col-12 text-center">
                <p class="text-muted fst-italic">{% trans "Aucun témoignage disponible pour le moment." %}</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- ======================= -->
<!-- STYLES LOCAUX -->
<!-- ======================= -->
<style>
.testimonial-card {
    border-radius: 1rem;
    transition: all 0.4s ease-in-out;
}
.testimonial-card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 10px 25px rgba(0,0,0,0.15);
}
.testimonial-card img {
    transition: transform 0.4s ease;
}
.testimonial-card:hover img {
    transform: scale(1.05);
}
</style>

<!-- ======================= -->
<!-- SCRIPTS -->
<!-- ======================= -->
<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
<script>
AOS.init({ duration: 800, once: true });
</script>

{% endblock %}
